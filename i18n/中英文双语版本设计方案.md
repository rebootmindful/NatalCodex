# ä¸­è‹±æ–‡åŒè¯­ç‰ˆæœ¬è®¾è®¡æ–¹æ¡ˆ

# NatalCodex ä¸­è‹±æ–‡åŒè¯­ç‰ˆæœ¬è®¾è®¡æ–¹æ¡ˆ

**ç‰ˆæœ¬**: 1.0 | **ç›®æ ‡**: å®ç°ä¸­è‹±æ–‡åŒè¯­çµé­‚å¥‘åˆå¡ç”Ÿæˆ

***

## ä¸€ã€å†…å®¹å›½é™…åŒ–(i18n)ç­–ç•¥

### 1.1 æ ¸å¿ƒå‘½ç†æœ¯è¯­ç¿»è¯‘ä½“ç³»

#### å¤©å¹²åœ°æ”¯ç¿»è¯‘æ ‡å‡†

| ä¸­æ–‡     | æ‹¼éŸ³   | è‹±æ–‡ç¿»è¯‘                 | è±¡å¾æ„ä¹‰              |
| ------ | ---- | -------------------- | ----------------- |
| **å¤©å¹²** |      | **Heavenly Stems**   |                   |
| ç”²      | JiÄ  | Yang Wood            | The Towering Tree |
| ä¹™      | YÇ   | Yin Wood             | The Delicate Vine |
| ä¸™      | BÇng | Yang Fire            | The Blazing Sun   |
| ä¸      | DÄ«ng | Yin Fire             | The Candle Flame  |
| æˆŠ      | WÃ¹   | Yang Earth           | The Mountain      |
| å·±      | JÇ   | Yin Earth            | The Fertile Field |
| åºš      | GÄ“ng | Yang Metal           | The Forged Sword  |
| è¾›      | XÄ«n  | Yin Metal            | The Precious Gem  |
| å£¬      | RÃ©n  | Yang Water           | The Ocean         |
| ç™¸      | GuÇ  | Yin Water            | The Morning Dew   |
| **åœ°æ”¯** |      | **Earthly Branches** |                   |
| å­      | ZÇ   | Rat                  |                   |
| ä¸‘      | ChÇ’u | Ox                   |                   |
| å¯…      | YÃ­n  | Tiger                |                   |
| å¯      | MÇo  | Rabbit               |                   |
| è¾°      | ChÃ©n | Dragon               |                   |
| å·³      | SÃ¬   | Snake                |                   |
| åˆ      | WÇ”   | Horse                |                   |
| æœª      | WÃ¨i  | Goat                 |                   |
| ç”³      | ShÄ“n | Monkey               |                   |
| é…‰      | YÇ’u  | Rooster              |                   |
| æˆŒ      | XÅ«   | Dog                  |                   |
| äº¥      | HÃ i  | Pig                  |                   |

#### åç¥ç³»ç»Ÿç¿»è¯‘

é‡‡ç”¨**è£æ ¼åŸå‹(Jungian Archetypes)**ä½œä¸ºè·¨æ–‡åŒ–æ¡¥æ¢:

| ä¸­æ–‡ | æ‹¼éŸ³        | ç›´è¯‘                   | æ¨èè‹±è¯‘(åŸå‹åŒ–)          | æ ¸å¿ƒå«ä¹‰ |
| -- | --------- | -------------------- | ------------------ | ---- |
| æ¯”è‚© | BÇjiÄn    | Shoulder-to-Shoulder | **The Peer**       | å¹³ç­‰ä¼™ä¼´ |
| åŠ«è´¢ | JiÃ©cÃ¡i    | Rob Wealth           | **The Rival**      | ç«äº‰è€…  |
| é£Ÿç¥ | ShÃ­shÃ©n   | Eating God           | **The Artist**     | åˆ›é€ è€…  |
| ä¼¤å®˜ | ShÄngguÄn | Hurt Officer         | **The Rebel**      | åå›è€…  |
| åè´¢ | PiÄncÃ¡i   | Indirect Wealth      | **The Explorer**   | å†’é™©å®¶  |
| æ­£è´¢ | ZhÃ¨ngcÃ¡i  | Direct Wealth        | **The Provider**   | ä¾›å…»è€…  |
| ä¸ƒæ€ | QÄ«shÄ     | Seven Killings       | **The Challenger** | æŒ‘æˆ˜è€…  |
| æ­£å®˜ | ZhÃ¨ngguÄn | Direct Officer       | **The Authority**  | æƒå¨è€…  |
| åå° | PiÄnyÃ¬n   | Indirect Seal        | **The Mystic**     | ç¥ç§˜è€…  |
| æ­£å° | ZhÃ¨ngyÃ¬n  | Direct Seal          | **The Sage**       | æ™ºè€…   |

#### ç¥ç…ç¿»è¯‘

| ä¸­æ–‡   | è‹±æ–‡ç¿»è¯‘           | è¯´æ˜    |
| ---- | -------------- | ----- |
| å¤©ä¹™è´µäºº | Heavenly Noble | è´µäººç›¸åŠ©  |
| æ–‡æ˜Œè´µäºº | Academic Star  | å­¦ä¸šæ–‡é‡‡  |
| ç¾Šåˆƒ   | Blade of Aries | åˆšå¼ºå‡¶é™©  |
| ç©ºäº¡   | Void           | è™šç©ºçŠ¶æ€  |
| æ¡ƒèŠ±   | Peach Blossom  | é­…åŠ›å¼‚æ€§ç¼˜ |
| åç›–   | Canopy Star    | å­¤é«˜è‰ºæœ¯  |

#### æ ¼å±€æœ¯è¯­ç¿»è¯‘

| ä¸­æ–‡    | è‹±æ–‡ç¿»è¯‘                           | è§£é‡Š      |
| ----- | ------------------------------ | ------- |
| ä¼¤å®˜ç”Ÿè´¢æ ¼ | Rebel-to-Explorer Pattern      | åˆ›æ„è½¬åŒ–ä¸ºè´¢å¯Œ |
| é£Ÿç¥åˆ¶æ€æ ¼ | Artist Taming Challenger       | æŸ”å…‹åˆšä¹‹å±€   |
| è´¢å®˜åŒç¾  | Prosperity & Authority Harmony | è´¢æƒå…¼å¤‡    |
| ä»æ€æ ¼   | Challenger Dominance           | é¡ºåº”å¼ºåŠ¿    |
| æ›²ç›´æ ¼   | Wood Harmony                   | æœ¨æ°”é€šè¾¾    |

### 1.2 å¤ç±å¼•ç”¨å¤„ç†æ–¹æ¡ˆ

#### ç­–ç•¥:ä¸‰æ®µå¼ç»“æ„

**åŸåˆ™**:ä¿ç•™æ–‡åŒ–éŸµå‘³+ç¡®ä¿å¯è¯»æ€§

**æ ¼å¼**:

1. **è§†è§‰å±‚**:ä¿ç•™ä¸­æ–‡åŸæ–‡(ç¹ä½“å­—,å¢å¼ºä»ªå¼æ„Ÿ)
2. **è¯—æ„è¯‘æ–‡å±‚**:è‹±æ–‡æ„è¯‘(éŸµå¾‹ä¼˜å…ˆ)
3. **ç°ä»£å¿ƒç†å­¦å±‚**:ç”¨è¥¿æ–¹å¿ƒç†å­¦è¯­è¨€é‡æ–°è¯ é‡Š

**ç¤ºä¾‹**:

```
ã€ä¸­æ–‡åŸæ–‡(ç¹ä½“)ã€‘
"ä¸ç«é™°æŸ”,å…§æ€§æ˜­èã€‚æŠ±ä¹™è€Œå­,åˆå£¬è€Œå¿ ã€‚æ—ºè€Œä¸çƒˆ,è¡°è€Œä¸çª®ã€‚å¦‚æœ‰å«¡æ¯,å¯ç§‹å¯å†¬ã€‚"
â€”â€”ã€Šæ»´å¤©é«“Â·å¤©å¹²ã€‹

ã€è¯—æ„è‹±è¯‘ã€‘
"Ding Fire, gentle flame within,
Embraces Wood with filial grace,
Merges Water with loyalty's face.
Bright yet not fierce, dim but not lost,
With Mother's wood, through autumn's frost."
â€” The Dripping Heavenly Marrow

ã€ç°ä»£å¿ƒç†å­¦è¯ é‡Š(è‹±æ–‡)ã€‘
Your Ding Fire nature represents introspective warmth. 
You draw wisdom from your Direct Seal (Wood = Mother archetype), 
showing deep loyalty when merging with Authority (Water = Officer). 
Your light adapts: intense when needed, subtle when wise, 
sustained through life's seasons by inner clarity.
```

### 1.3 MBTIå†…å®¹åŒè¯­å¤„ç†

#### è®¤çŸ¥åŠŸèƒ½æ ˆå¯¹ç…§

| åŠŸèƒ½ | ä¸­æ–‡   | è‹±æ–‡                    |
| -- | ---- | --------------------- |
| Ni | å†…å€¾ç›´è§‰ | Introverted Intuition |
| Ne | å¤–å€¾ç›´è§‰ | Extraverted Intuition |
| Si | å†…å€¾æ„Ÿè§‰ | Introverted Sensing   |
| Se | å¤–å€¾æ„Ÿè§‰ | Extraverted Sensing   |
| Fi | å†…å€¾æƒ…æ„Ÿ | Introverted Feeling   |
| Fe | å¤–å€¾æƒ…æ„Ÿ | Extraverted Feeling   |
| Ti | å†…å€¾æ€è€ƒ | Introverted Thinking  |
| Te | å¤–å€¾æ€è€ƒ | Extraverted Thinking  |

#### æ€§æ ¼æè¿°æ–‡åŒ–é€‚é…

**ä¸­æ–‡ç‰ˆ**(å¼ºè°ƒé›†ä½“å…³ç³»):

> "ä½ å¦‚åŒæš—å¤œä¸­çš„çƒ›å…‰,ç”¨å†…åœ¨å…‰æ˜ç…§äº®ä»–äººã€‚é«˜åº¦æ•æ„Ÿ,å¯Œæœ‰åŒç†å¿ƒ,è¿½æ±‚ç²¾ç¥åœ†æ»¡ã€‚"

**è‹±æ–‡ç‰ˆ**(å¼ºè°ƒä¸ªä½“ä»·å€¼):

> "You are the keeper of inner light in the darknessâ€”a quiet beacon others trust.

> Deeply intuitive and empathetic, you seek meaning beyond the material."

***

## äºŒã€è§†è§‰è®¾è®¡åŒè¯­åŒ–æ–¹æ¡ˆ

### 2.1 æ–¹æ¡ˆå¯¹æ¯”åˆ†æ

#### æ–¹æ¡ˆA:åŒå¡ç‰‡æ¨¡å¼ â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ (å¼ºçƒˆæ¨è)

**æè¿°**:

* ç”Ÿæˆä¸¤å¼ å®Œå…¨ç‹¬ç«‹çš„å¡ç‰‡
* ä¸­æ–‡ç‰ˆ:çº¯ä¸­æ–‡,ç¯†ä½“æ ‡é¢˜,å®‹ä½“æ­£æ–‡
* è‹±æ–‡ç‰ˆ:çº¯è‹±æ–‡,Gothic/Serifæ ‡é¢˜,Sans-serifæ­£æ–‡

**ä¼˜ç‚¹**:

* âœ… ä¿¡æ¯å¯†åº¦å¯æ§,è§†è§‰æ•ˆæœæœ€ä½³
* âœ… æ–‡åŒ–é£æ ¼å„è‡ªç‹¬ç«‹(ä¸­æ–‡ç¦…æ„ vs è‹±æ–‡ç¥ç§˜å­¦)
* âœ… æ˜“äºç¤¾äº¤åª’ä½“åˆ†äº«(é’ˆå¯¹ä¸åŒè¯­è¨€å¸‚åœº)
* âœ… å­—ä½“æ’ç‰ˆæ— å†²çª

**ç¼ºç‚¹**:

* âŒ å›¾ç‰‡ç”Ÿæˆæˆæœ¬ç¿»å€
* âŒ ç”¨æˆ·éœ€è¦é€‰æ‹©è¯­è¨€(ä½†è¿™ä¹Ÿæ˜¯ä¼˜ç‚¹)

**å®æ–½å»ºè®®**:

* ç”¨æˆ·åœ¨Input Pageé€‰æ‹©è¯­è¨€
* ç”Ÿæˆå¯¹åº”è¯­è¨€çš„å•ä¸€å¡ç‰‡
* ç»“æœé¡µæä¾›"åˆ‡æ¢è¯­è¨€é‡æ–°ç”Ÿæˆ"é€‰é¡¹

#### æ–¹æ¡ˆB:å•å¡ç‰‡åŒè¯­æ¨¡å¼ â­ï¸â­ï¸ (ä¸æ¨è)

**æè¿°**:

* ä¸€å¼ å¡ç‰‡åŒæ—¶åŒ…å«ä¸­è‹±æ–‡
* å…³é”®ä¿¡æ¯åŒè¯­å¹¶åˆ—æ˜¾ç¤º

**ä¼˜ç‚¹**:

* âœ… å±•ç¤ºå…¨é¢,ä¸€æ¬¡çœ‹å®Œ
* âœ… ç”Ÿæˆæˆæœ¬ä½

**ç¼ºç‚¹**:

* âŒ ä¿¡æ¯è¿‡äºå¯†é›†,è§†è§‰æ··ä¹±
* âŒ ä¸­è‹±æ–‡å­—ä½“éš¾ä»¥åè°ƒ
* âŒ ä¸ç¬¦åˆ"ä¿¡æ¯å¯†åº¦çˆ†ç‚¸ä½†å±‚æ¬¡åˆ†æ˜"çš„è®¾è®¡ç†å¿µ
* âŒ åˆ†äº«æ—¶é’ˆå¯¹æ€§ä¸å¼º

#### æ–¹æ¡ˆC:å‰ç«¯åŠ¨æ€åˆ‡æ¢ â­ï¸â­ï¸â­ï¸â­ï¸ (æœ€ä½³ç”¨æˆ·ä½“éªŒ)

**æè¿°**:

* å‰ç«¯æä¾›è¯­è¨€åˆ‡æ¢æŒ‰é’®
* ç‚¹å‡»åé‡æ–°è°ƒç”¨APIç”Ÿæˆå¯¹åº”è¯­è¨€çš„å¡ç‰‡
* æ— éœ€åˆ·æ–°é¡µé¢,æµç•…åˆ‡æ¢

**ä¼˜ç‚¹**:

* âœ… ç”¨æˆ·ä½“éªŒæœ€ä½³
* âœ… çµæ´»æ€§é«˜
* âœ… å¯A/Bæµ‹è¯•ä¸åŒç¿»è¯‘ç‰ˆæœ¬

**ç¼ºç‚¹**:

* âŒ éœ€è¦é¢å¤–çš„APIè°ƒç”¨
* âŒ æŠ€æœ¯å®ç°ç¨å¤æ‚

**å®æ–½å»ºè®®**:

* **MVPé˜¶æ®µ**:ç»“åˆæ–¹æ¡ˆA,åœ¨Result Pageæä¾›"Switch to English"æŒ‰é’®
* **Phase 2**:å®ç°å‰ç«¯å®æ—¶åˆ‡æ¢,æ— éœ€é‡æ–°æäº¤è¡¨å•

### 2.2 å­—ä½“è®¾è®¡åŒè¯­é€‚é…

#### ä¸­æ–‡ç‰ˆå­—ä½“æ–¹æ¡ˆ(ä¿æŒç°æœ‰)

| å…ƒç´   | å­—ä½“          | è¯´æ˜    |
| --- | ----------- | ----- |
| ä¸»æ ‡é¢˜ | æ–¹æ­£å°ç¯†ä½“       | å¤å…¸ç¥ç§˜æ„Ÿ |
| å‰¯æ ‡é¢˜ | ç«™é…·é«˜ç«¯é»‘       | ç°ä»£ç§‘æŠ€æ„Ÿ |
| æ­£æ–‡  | æ€æºå®‹ä½“        | æ˜“è¯»æ€§   |
| å…³é”®è¯ | éœé¹œæ–‡æ¥· + è§å…‰æè¾¹ | å¼ºè°ƒè§†è§‰  |

#### è‹±æ–‡ç‰ˆå­—ä½“æ–¹æ¡ˆ(æ–°å¢)

| å…ƒç´   | å­—ä½“                    | è¯´æ˜     | é£æ ¼å‚è€ƒ                            |
| --- | --------------------- | ------ | ------------------------------- |
| ä¸»æ ‡é¢˜ | **Blackletter (å“¥ç‰¹ä½“)** | ç¥ç§˜å­¦æƒå¨æ„Ÿ | Old English Text, Fette Fraktur |
| å‰¯æ ‡é¢˜ | **Display Serif**     | ç§‘æŠ€æœªæ¥æ„Ÿ  | Playfair Display, Cinzel        |
| æ­£æ–‡  | **Humanist Sans**     | ç°ä»£æ˜“è¯»   | Source Sans Pro, Open Sans      |
| å…³é”®è¯ | **Condensed Bold**    | å†²å‡»åŠ›    | Bebas Neue, Oswald              |

**é…è‰²ä¿æŒä¸€è‡´**:

* èƒŒæ™¯:é»‘ç´«æ¸å˜(#0a0015 â†’ #1a0a2e)
* ä¸»è‰²è°ƒ:éœ“è™¹ç´«(#a855f7)ã€ç”µå…‰è“(#3b82f6)
* äº”è¡Œè‰²:æœ¨é’ã€ç«çº¢ã€åœŸé»„ã€é‡‘ç™½ã€æ°´é»‘
* å¼ºè°ƒè‰²:éé‡‘(#fbbf24)

### 2.3 å¸ƒå±€å¾®è°ƒå»ºè®®

**ä¸­æ–‡ç‰ˆ**(ç°æœ‰å¸ƒå±€):

* ä¿æŒ1080Ã—2560å°ºå¯¸
* ç¯†ä½“æ ‡é¢˜å æ¯”å¤§(è§†è§‰å†²å‡»)
* åœ†å½¢å‘½ç›˜+é›·è¾¾å›¾å·¦å³å¯¹ç§°

**è‹±æ–‡ç‰ˆ**(å¾®è°ƒ):

* åŒæ ·1080Ã—2560
* æ ‡é¢˜å­—å·ç•¥å°(è‹±æ–‡å­—æ¯æ¯”æ±‰å­—å®½)
* å‘½ç›˜ä¸­å¿ƒæ”¹ä¸º"Day Master: Ding Fire"
* é›·è¾¾å›¾æ ‡ç­¾æ”¹ä¸ºè‹±æ–‡ç¼©å†™(Ni, Fe, Ti, Se)

***

## ä¸‰ã€æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 3.1 æ•°æ®ç»“æ„è®¾è®¡

#### TypeScriptæ¥å£å®šä¹‰

```typescript
// types/soul-card.ts

interface BilingualText {
  zh: string;
  en: string;
}

interface SoulCodexData {
  // åŸºç¡€ä¿¡æ¯
  birthInfo: {
    date: string;
    time: string;
    location: {
      zh: string;
      en: string;
    };
  };
  
  // å››æŸ±å…«å­—
  fourPillars: {
    year: { stem: BilingualText; branch: BilingualText };
    month: { stem: BilingualText; branch: BilingualText };
    day: { stem: BilingualText; branch: BilingualText };
    hour: { stem: BilingualText; branch: BilingualText };
  };
  
  // æ—¥ä¸»
  dayMaster: {
    stem: BilingualText;          // "ä¸ç«" / "Ding Fire"
    element: BilingualText;        // "é˜´ç«" / "Yin Fire"
    imagery: BilingualText;        // "çƒ›å…‰" / "Candle Flame"
  };
  
  // åç¥é…ç½®
  tenGods: Array<{
    position: string;              // "å¹´å¹²", "æœˆæ”¯" etc.
    name: BilingualText;           // "é£Ÿç¥" / "The Artist"
    element: string;
  }>;
  
  // æ ¼å±€
  pattern: {
    name: BilingualText;           // "ä¼¤å®˜ç”Ÿè´¢æ ¼" / "Rebel-to-Explorer Pattern"
    level: BilingualText;          // "ä¸­ä¸Šæ ¼å±€" / "Upper-Middle Tier"
    description: BilingualText;
  };
  
  // å¤ç±å¼•ç”¨
  classicQuote: {
    original: string;              // ç¹ä½“ä¸­æ–‡åŸæ–‡
    poeticTranslation: string;     // è‹±æ–‡è¯—æ„è¯‘æ–‡
    modernInterpretation: {
      zh: string;
      en: string;
    };
    source: BilingualText;         // "ã€Šæ»´å¤©é«“Â·å¤©å¹²ã€‹" / "The Dripping Heavenly Marrow"
  };
  
  // MBTI
  mbti: {
    type: string;                  // "INFJ" (å›½é™…é€šç”¨)
    title: BilingualText;          // "æå€¡è€…" / "The Advocate"
    cognitiveStack: Array<{
      function: string;            // "Ni", "Fe", "Ti", "Se"
      name: BilingualText;
      percentage: number;
    }>;
  };
  
  // çµé­‚ç§°å·
  soulTitle: {
    main: BilingualText;           // "ä¸ç«çƒ›å½±Â·INFJ" / "Ding Fire Candle KeeperÂ·INFJ"
    subtitle: BilingualText;       // "æ˜Ÿç«å¼•è·¯è€…" / "The Starlight Guide"
  };
  
  // æ€§æ ¼æ€»è¯„
  personalityAnalysis: {
    traits: BilingualText[];
    lifeAdvice: BilingualText[];
    luckyElements: {
      direction: BilingualText;
      color: BilingualText;
      number: string;
    };
  };
}
```

### 3.2 APIè·¯ç”±è®¾è®¡

#### æ–°å¢ç«¯ç‚¹:`POST /api/reports/generate-bilingual`

```typescript
// app/api/reports/generate-bilingual/route.ts
import { NextRequest, NextResponse } from 'next/server';
import { generateBilingualReport } from '@/lib/bilingual-generator';

export async function POST(req: NextRequest) {
  const { orderId, language } = await req.json();
  // language: 'zh' | 'en' | 'both'
  
  // 1. è·å–å…«å­—æ•°æ®
  const baziData = await getBaziData(orderId);
  
  // 2. ç”ŸæˆåŒè¯­æŠ¥å‘Š
  const bilingualData = await generateBilingualReport(baziData);
  
  // 3. æ ¹æ®languageå‚æ•°è¿”å›
  if (language === 'zh') {
    return NextResponse.json({ 
      success: true,
      data: extractChineseVersion(bilingualData),
      cardImageUrl: await generateChineseCard(bilingualData)
    });
  } else if (language === 'en') {
    return NextResponse.json({ 
      success: true,
      data: extractEnglishVersion(bilingualData),
      cardImageUrl: await generateEnglishCard(bilingualData)
    });
  } else {
    // language === 'both'
    return NextResponse.json({ 
      success: true,
      data: bilingualData,
      cardImageUrls: {
        zh: await generateChineseCard(bilingualData),
        en: await generateEnglishCard(bilingualData)
      }
    });
  }
}
```

### 3.3 Promptå·¥ç¨‹ç­–ç•¥

#### åˆ†å±‚ç”Ÿæˆç­–ç•¥(æ¨è)

**æ ¸å¿ƒç†å¿µ**:å…ˆä¸­æ–‡æ¨ç†,åè‹±æ–‡è½¬è¯‘

##### Step 1:ä¸­æ–‡é€»è¾‘æ¨æ¼”(åŸºäºå‘½ç†)

```typescript
const chinesePrompt = `
ä½ æ˜¯ç²¾é€šã€Šæ»´å¤©é«“ã€‹ã€Šç©·é€šå®é‰´ã€‹çš„å‘½ç†å¤§å¸ˆã€‚

å…«å­—æ•°æ®:
- æ—¥ä¸»:ä¸ç«
- å››æŸ±:å·±å¯ å£¬ç”³ ä¸å·³ ä¸æœª
- æ ¼å±€:ä¼¤å®˜ç”Ÿè´¢æ ¼

è¯·ä¸¥æ ¼æŒ‰ç…§å¤æ³•:
1. åˆ¤æ–­æ—¥ä¸»æ—ºè¡°
2. ç¡®å®šç”¨ç¥å¿Œç¥
3. åˆ†ææ ¼å±€å±‚çº§
4. å¼•ç”¨å¤ç±åŸæ–‡

è¾“å‡ºJSONæ ¼å¼...
`;
```

##### Step 2:è‹±æ–‡æ–‡åŒ–è½¬è¯‘(åŸºäºå¿ƒç†å­¦)

```typescript
const englishTranslationPrompt = `
You are a bilingual expert in Chinese metaphysics and Jungian psychology.

Given the Chinese BaZi analysis:
${chineseAnalysisResult}

Translate into English with the following principles:
1. Use Jungian archetypes for Ten Gods (é£Ÿç¥ â†’ The Artist)
2. Preserve mystical atmosphere in classic quotes
3. Adapt personality descriptions for Western audience
4. Keep technical terms in pinyin with explanations

Output JSON format...
`;
```

#### å•æ¬¡åŒè¯­ç”Ÿæˆ(å¤‡é€‰)

**é€‚ç”¨åœºæ™¯**:ä½¿ç”¨GPT-4æˆ–Geminiç­‰æ”¯æŒå¤šè¯­è¨€çš„å¤§æ¨¡å‹

```typescript
const bilingualPrompt = `
You are "Eastern Echo", a sage bridging Chinese BaZi and modern psychology.

Generate a bilingual soul analysis (Chinese + English) based on:
- Birth: 1999.8.8 14:30, Shanghai
- Four Pillars: å·±å¯ å£¬ç”³ ä¸å·³ ä¸æœª
- Day Master: Ding Fire

Requirements:
1. Provide complete analysis in BOTH languages
2. Chinese: use classical terminology and ancient quotes
3. English: use Jungian archetypes and modern psychology
4. Maintain consistent meaning across languages

Output structured JSON...
`;
```

### 3.4 å›¾ç‰‡ç”Ÿæˆæ–¹æ¡ˆ

#### æ–¹æ¡ˆA:åˆ†åˆ«ç”Ÿæˆ(æ¨è)

```typescript
// ä¸­æ–‡ç‰ˆå¡ç‰‡
const chineseCardPrompt = `
åˆ›å»ºä¸­æ–‡ç‰ˆçµé­‚å¥‘åˆå¡,1080Ã—2560,èµ›åšé“æ•™é£æ ¼...
(è¯¦ç»†çš„ä¸­æ–‡prompt,å‚è€ƒç°æœ‰ç¤ºä¾‹)
`;

// è‹±æ–‡ç‰ˆå¡ç‰‡
const englishCardPrompt = `
Create English version Soul Codex Card, 1080Ã—2560, Cyber-Zen style.

ã€Top Title Areaã€‘
- Large Gothic font title: "Soul Codex of [Name]"
- Subtitle: "Yearå·±å¯, Month å£¬ç”³, Day ä¸å·³, Hour ä¸æœª"

ã€Main Visual Areaã€‘
Left: Traditional ink-style BaZi chart
- Center: "Day Master: Ding Fire"
- Four Pillars surrounding with English labels
- Ten Gods in different colors: The Artist, The Sage, The Authority...

Right: Cyber MBTI radar chart
- 8 cognitive functions with English abbreviations
- Ni (Introverted Intuition) 95%
- Fe (Extraverted Feeling) 88%
...

ã€Soul Titleã€‘
- Large gilded font: "Ding Fire Candle KeeperÂ·INFJ"
- Subtitle: "The Starlight Guide | The Sage of Mao Wood"

ã€Information Areaã€‘
- Pattern: Rebel-to-Explorer (Upper-Middle)
- Personality keywords: "Intuitive" "Empathetic" "Idealistic"

ã€Bottom Quoteã€‘
- Classical quote in Chinese (preserved)
- Poetic English translation
- Modern interpretation

Typography:
- Title: Blackletter / Old English
- Body: Source Sans Pro
- Keywords: Bebas Neue with neon glow

Same color scheme as Chinese version.
`;
```

#### Nano Banana Proè°ƒç”¨

```typescript
// lib/generate-soul-card.ts
export async function generateSoulCard(
  data: SoulCodexData,
  language: 'zh' | 'en'
) {
  const prompt = language === 'zh' 
    ? buildChineseCardPrompt(data)
    : buildEnglishCardPrompt(data);
  
  const imageUrl = await nanoBananaPro({
    prompt,
    size: '1080x2560',
    style: language === 'zh' ? 'cyber-zen-chinese' : 'cyber-zen-english'
  });
  
  return imageUrl;
}
```

***

## å››ã€ç”¨æˆ·ä½“éªŒæµç¨‹è®¾è®¡

### 4.1 è¯­è¨€é€‰æ‹©æ—¶æœº

#### æ¨èæ–¹æ¡ˆ:Input Pageé€‰æ‹©

**æµç¨‹**:

1. **Landing Page**: æ ¹æ®IP/æµè§ˆå™¨è¯­è¨€è‡ªåŠ¨æ˜¾ç¤ºå¯¹åº”è¯­è¨€
2. **Input Page**:
   * å³ä¸Šè§’æ˜¾ç¤ºè¯­è¨€åˆ‡æ¢æŒ‰é’®(ğŸŒ EN / ä¸­æ–‡)
   * è¡¨å•æ ‡ç­¾æ ¹æ®è¯­è¨€æ˜¾ç¤º
   * **æ–°å¢**:åœ¨è¡¨å•åº•éƒ¨æ·»åŠ "æŠ¥å‘Šè¯­è¨€åå¥½"é€‰æ‹©æ¡†
     * "ç”Ÿæˆä¸­æ–‡æŠ¥å‘Š"
     * "ç”Ÿæˆè‹±æ–‡æŠ¥å‘Š"
     * "åŒæ—¶ç”Ÿæˆä¸¤ç§è¯­è¨€"(ä»˜è´¹ç”¨æˆ·å¯é€‰)
3. **Result Page**:
   * æ˜¾ç¤ºç”¨æˆ·é€‰æ‹©çš„è¯­è¨€ç‰ˆæœ¬
   * æä¾›"åˆ‡æ¢è¯­è¨€"æŒ‰é’®é‡æ–°ç”Ÿæˆ

### 4.2 é»˜è®¤è¯­è¨€é€»è¾‘

```typescript
// utils/detect-language.ts
export function detectUserLanguage(): 'zh' | 'en' {
  // 1. ä¼˜å…ˆä½¿ç”¨URLå‚æ•°
  const urlLang = new URL(window.location.href).searchParams.get('lang');
  if (urlLang === 'zh' || urlLang === 'en') return urlLang;
  
  // 2. æ£€æŸ¥LocalStorage(ç”¨æˆ·ä¸Šæ¬¡é€‰æ‹©)
  const savedLang = localStorage.getItem('preferred_language');
  if (savedLang === 'zh' || savedLang === 'en') return savedLang;
  
  // 3. IPåœ°ç†ä½ç½®åˆ¤æ–­
  const ipCountry = getCountryFromIP(); // ä¸­å›½/å°æ¹¾/é¦™æ¸¯ â†’ 'zh'
  if (['CN', 'TW', 'HK', 'SG'].includes(ipCountry)) return 'zh';
  
  // 4. æµè§ˆå™¨è¯­è¨€
  const browserLang = navigator.language.toLowerCase();
  if (browserLang.startsWith('zh')) return 'zh';
  
  // 5. é»˜è®¤è‹±æ–‡(å›½é™…å¸‚åœº)
  return 'en';
}
```

### 4.3 åˆ†äº«ä¸ä¼ æ’­

#### ç¤¾äº¤åª’ä½“åˆ†äº«é“¾æ¥

**ä¸­æ–‡ç‰ˆ**:

```
https://natalcodex.com/share/abc123?lang=zh
```

* OG Image: ä¸­æ–‡ç‰ˆçµé­‚å¥‘åˆå¡
* OG Title: "æˆ‘çš„çµé­‚å¥‘åˆå¡Â·ä¸ç«çƒ›å½±Â·INFJ"
* OG Description: "ç”¨å¤è€æ™ºæ…§è§£é”ä½ çš„çµé­‚æºä»£ç "

**è‹±æ–‡ç‰ˆ**:

```
https://natalcodex.com/share/abc123?lang=en
```

* OG Image: è‹±æ–‡ç‰ˆSoul Codex Card
* OG Title: "My Soul CodexÂ·Ding Fire Candle KeeperÂ·INFJ"
* OG Description: "Unlock the source code of your soul with ancient wisdom"

#### åŠ¨æ€OG Imageç”Ÿæˆ

```typescript
// app/api/og/route.tsx
import { ImageResponse } from '@vercel/og';

export async function GET(request: Request) {
  const { searchParams } = new URL(request.url);
  const orderId = searchParams.get('id');
  const language = searchParams.get('lang') || 'en';
  
  const data = await getSoulCodexData(orderId);
  
  return new ImageResponse(
    language === 'zh' 
      ? <ChineseOGCard data={data} />
      : <EnglishOGCard data={data} />,
    {
      width: 1200,
      height: 630,
    }
  );
}
```

***

## äº”ã€ä¼˜å…ˆçº§å»ºè®®ä¸å®æ–½è·¯çº¿å›¾

### Phase 1: MVP(2-3å‘¨)

#### Week 1: åŸºç¡€æ¶æ„

* âœ… å»ºç«‹æœ¯è¯­ç¿»è¯‘å¯¹ç…§è¡¨(JSONé…ç½®æ–‡ä»¶)
* âœ… è®¾è®¡TypeScriptåŒè¯­æ•°æ®ç»“æ„
* âœ… å®ç°åŸºç¡€çš„è¯­è¨€æ£€æµ‹é€»è¾‘

#### Week 2: æ ¸å¿ƒåŠŸèƒ½

* âœ… å®ç°ä¸­æ–‡ç‰ˆå®Œæ•´æµç¨‹(å·²æœ‰)
* âœ… æ·»åŠ è‹±æ–‡ç‰ˆpromptç”Ÿæˆé€»è¾‘
* âœ… æµ‹è¯•ä¸­æ–‡â†’è‹±æ–‡è½¬è¯‘è´¨é‡

#### Week 3: è§†è§‰ä¸æµ‹è¯•

* âœ… ç”Ÿæˆè‹±æ–‡ç‰ˆçµé­‚å¥‘åˆå¡è®¾è®¡
* âœ… é›†æˆNano Banana ProåŒè¯­ç”Ÿæˆ
* âœ… ç«¯åˆ°ç«¯æµ‹è¯•(ä¸­è‹±æ–‡å„5ä¸ªçœŸå®æ¡ˆä¾‹)

**MVPç›®æ ‡**:

* ç”¨æˆ·å¯é€‰æ‹©ä¸­æ–‡æˆ–è‹±æ–‡ç”ŸæˆæŠ¥å‘Š
* æ¯ä¸ªè®¢å•ç”Ÿæˆä¸€å¼ å¯¹åº”è¯­è¨€çš„å¡ç‰‡
* æœ¯è¯­ç¿»è¯‘å‡†ç¡®,æ— æ˜æ˜¾æœºç¿»ç—•è¿¹

### Phase 2: ä½“éªŒä¼˜åŒ–(1-2å‘¨)

#### é«˜çº§åŠŸèƒ½

* âœ… å‰ç«¯å®æ—¶è¯­è¨€åˆ‡æ¢(æ— éœ€é‡æ–°æäº¤è¡¨å•)
* âœ… ä»˜è´¹ç”¨æˆ·å¯åŒæ—¶ç”Ÿæˆä¸­è‹±æ–‡åŒå¡
* âœ… ä¼˜åŒ–è‹±æ–‡ç‰ˆå­—ä½“(å¼•å…¥Blackletter)
* âœ… æ·»åŠ å¤ç±å¼•ç”¨çš„è¯—æ„è‹±è¯‘

#### SEOä¸åˆ†äº«

* âœ… åŠ¨æ€OG Image(ä¸­è‹±æ–‡åˆ†åˆ«ç”Ÿæˆ)
* âœ… å¤šè¯­è¨€sitemap
* âœ… hreflangæ ‡ç­¾é…ç½®

### Phase 3: æ·±åº¦æœ¬åœ°åŒ–(æœªæ¥è¿­ä»£)

#### åŒºåŸŸåŒ–å®šåˆ¶

* ä¸œå—äºšç‰ˆ:ç®€ä½“ä¸­æ–‡+è‹±æ–‡æ··æ’(é’ˆå¯¹æ–°åŠ å¡/é©¬æ¥è¥¿äºš)
* ç¹ä½“ä¸­æ–‡ç‰ˆ:é’ˆå¯¹å°æ¹¾/é¦™æ¸¯å¸‚åœº
* è¥¿ç­ç‰™è¯­ç‰ˆ:æ‹‰ç¾å¸‚åœºæ‰©å±•

#### æ–‡åŒ–å¯¹æ¯”åŠŸèƒ½

* "å…«å­— vs å æ˜Ÿæœ¯"å¯¹ç…§è¡¨
* "åç¥ vs å¡”ç½—ç‰Œ"åŸå‹æ˜ å°„
* è¥¿æ–¹ç”¨æˆ·æ›´æ˜“ç†è§£çš„ç±»æ¯”

***

## å…­ã€æˆæœ¬æ•ˆç›Šåˆ†æ

### å¼€å‘æˆæœ¬

| é¡¹ç›®       | å·¥ä½œé‡(äººæ—¥)  | è¯´æ˜                  |
| -------- | -------- | ------------------- |
| æœ¯è¯­ç¿»è¯‘åº“    | 2        | ä¸€æ¬¡æ€§æŠ•å…¥,åç»­ç»´æŠ¤æˆæœ¬ä½       |
| æ•°æ®ç»“æ„è®¾è®¡   | 2        | TypeScriptæ¥å£å®šä¹‰      |
| Promptå·¥ç¨‹ | 3        | ä¸­è‹±æ–‡promptè°ƒä¼˜         |
