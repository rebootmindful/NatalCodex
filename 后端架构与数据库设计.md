# åç«¯æ¶æ„ä¸æ•°æ®åº“è®¾è®¡

# NatalCodex åç«¯æ¶æ„ä¸æ•°æ®åº“è®¾è®¡

**ç‰ˆæœ¬**: 1.0 | **æŠ€æœ¯æ ˆ**: Next.js API Routes + Neon Postgres + Drizzle ORM

***

## 1. æ¶æ„è®¾è®¡å†³ç­–

### 1.1 ä¸ºä»€ä¹ˆéœ€è¦åç«¯æ•°æ®åº“?

**å…³é”®é—®é¢˜**: åŸæ–¹æ¡ˆè®¡åˆ’ä½¿ç”¨çº¯å®¢æˆ·ç«¯å­˜å‚¨(LocalStorage),è¿™åœ¨MVPé˜¶æ®µå­˜åœ¨ä¸‰ä¸ªè‡´å‘½ç¼ºé™·:

1. **æ”¯ä»˜å®‰å…¨æ¼æ´** ğŸ”´å‰ç«¯æ— æ³•å¯é éªŒè¯æ”¯ä»˜çŠ¶æ€,ç”¨æˆ·å¯é€šè¿‡ä¿®æ”¹å‰ç«¯ä»£ç ç»•è¿‡$12.90çš„ä»˜è´¹é—¨æ§›,å…è´¹è·å–Vertex AIæŠ¥å‘Šã€‚
2. **æ•°æ®æ˜“å¤±æ€§** ğŸŸ¡ç”¨æˆ·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜æˆ–æ›´æ¢è®¾å¤‡å,å…¶èŠ±è´¹$12.90è´­ä¹°çš„æŠ¥å‘Šå°†æ°¸ä¹…ä¸¢å¤±,å¼•å‘é€€æ¬¾çº çº·å’Œè´Ÿé¢å£ç¢‘ã€‚
3. **è¿è¥ç›²åŒº** ğŸŸ¡æ— æ³•ç»Ÿè®¡DAUã€è½¬åŒ–ç‡ã€æ¼æ–—åˆ†æç­‰å…³é”®æŒ‡æ ‡,äº§å“è¿­ä»£ç¼ºä¹æ•°æ®æ”¯æ’‘ã€‚

**ç»“è®º**: å¿…é¡»å¼•å…¥åç«¯æ•°æ®åº“,æœ€å°åŒ–å®ç°"è®¢å•-æŠ¥å‘Š"æŒä¹…åŒ–å­˜å‚¨ã€‚

### 1.2 æŠ€æœ¯é€‰å‹: Vercel + Neon Postgres

**ç»„åˆä¼˜åŠ¿**:

* **ServerlessåŸç”Ÿ**: Neoné‡‡ç”¨è®¡ç®—å­˜å‚¨åˆ†ç¦»æ¶æ„,å®Œç¾é€‚é…Vercel Serverless Functionsçš„çŸ­è¿æ¥ç‰¹æ€§
* **å†·å¯åŠ¨ä¼˜åŒ–**: è¿æ¥æ± è‡ªåŠ¨ç®¡ç†,æ— éœ€æ‰‹åŠ¨é…ç½®pgBouncer
* **å¼€å‘ä½“éªŒ**: é…åˆDrizzle ORM,TypeScriptç±»å‹å®‰å…¨,AIç¼–ç¨‹å·¥å…·(Cursor/Windsurf)æ”¯æŒæˆç†Ÿ
* **æˆæœ¬å‹å¥½**: Neon Free Tieræä¾›0.5GBå­˜å‚¨,è¶³ä»¥æ”¯æ’‘æ•°ä¸‡ä»½çº¯æ–‡æœ¬æŠ¥å‘Š

**å¯¹æ¯”æ–¹æ¡ˆ**:

| æ–¹æ¡ˆ                | ä¼˜ç‚¹                | ç¼ºç‚¹      | é€‚ç”¨æ€§       |
| ----------------- | ----------------- | ------- | --------- |
| **Neon Postgres** | Serverlesså‹å¥½,åˆ†æ”¯ç®¡ç† | å…è´¹é¢åº¦æœ‰é™  | âœ… æ¨è(MVP) |
| Supabase          | åŠŸèƒ½å…¨é¢,å«Auth        | è¿æ¥æ± é…ç½®å¤æ‚ | âœ… å¤‡é€‰      |
| PlanetScale       | MySQLè¯­æ³•ç†Ÿæ‚‰         | ä¸æ”¯æŒå¤–é”®   | âŒ ä¸æ¨è     |
| Railway Postgres  | ä»·æ ¼ä¾¿å®œ              | å†·å¯åŠ¨æ…¢    | âš ï¸ å°é¡¹ç›®å¯ç”¨  |

***

## 2. æ•°æ®åº“Schemaè®¾è®¡

### 2.1 æ ¸å¿ƒè¡¨ç»“æ„

é‡‡ç”¨**æç®€è®¾è®¡åŸåˆ™**,MVPé˜¶æ®µä»…éœ€2å¼ è¡¨:

#### Table: `orders` (è®¢å•è¡¨)

å­˜å‚¨æ”¯ä»˜äº¤æ˜“æµæ°´,ä½œä¸ºä¸šåŠ¡ä¸»é”®ç´¢å¼•ã€‚

```typescript
// schema/orders.ts (Drizzle ORM)
import { pgTable, uuid, varchar, decimal, timestamp, pgEnum } from 'drizzle-orm/pg-core';

export const paymentStatusEnum = pgEnum('payment_status', ['pending', 'paid', 'failed', 'refunded']);

export const orders = pgTable('orders', {
  id: uuid('id').primaryKey().defaultRandom(),
  email: varchar('email', { length: 255 }).notNull(),
  amount: decimal('amount', { precision: 10, scale: 2 }).notNull().default('12.90'),
  currency: varchar('currency', { length: 3 }).notNull().default('USD'),
  paymentStatus: paymentStatusEnum('payment_status').notNull().default('pending'),
  creemPaymentId: varchar('creem_payment_id', { length: 255 }),  // Creem.ioäº¤æ˜“ID
  createdAt: timestamp('created_at').notNull().defaultNow(),
  updatedAt: timestamp('updated_at').notNull().defaultNow(),
});
```

**å­—æ®µè¯´æ˜**:

* `id`: è®¢å•å”¯ä¸€æ ‡è¯†(UUID),ä½œä¸ºç”¨æˆ·æŸ¥è¯¢å‡­è¯
* `email`: ç”¨æˆ·é‚®ç®±(ç”¨äºå‘é€æŠ¥å‘Šå’Œè®¢å•æŸ¥è¯¢)
* `paymentStatus`: æ”¯ä»˜çŠ¶æ€(pendingâ†’paidâ†’failed/refunded)
* `creemPaymentId`: Creem.ioè¿”å›çš„æ”¯ä»˜ID,ç”¨äºå¹‚ç­‰æ€§æ ¡éªŒ

#### Table: `reports` (æŠ¥å‘Šè¡¨)

å­˜å‚¨ç”¨æˆ·å‡ºç”Ÿæ•°æ®å’ŒAIç”Ÿæˆçš„æŠ¥å‘Šå†…å®¹ã€‚

```typescript
// schema/reports.ts
import { pgTable, uuid, jsonb, text, timestamp, index } from 'drizzle-orm/pg-core';
import { orders } from './orders';

export const reports = pgTable('reports', {
  id: uuid('id').primaryKey().defaultRandom(),
  orderId: uuid('order_id').notNull().references(() => orders.id, { onDelete: 'cascade' }),
  
  // ç”¨æˆ·è¾“å…¥çš„å‡ºç”Ÿä¿¡æ¯(JSONæ ¼å¼å­˜å‚¨)
  birthData: jsonb('birth_data').notNull().$type<{
    year: number;
    month: number;
    day: number;
    hour?: number;
    timezone?: string;
  }>(),
  
  // å…«å­—è®¡ç®—ç»“æœ(JSONæ ¼å¼å­˜å‚¨)
  baziResult: jsonb('bazi_result').notNull().$type<{
    fourPillars: string[];
    dayMaster: string;
    elements: { wood: number; fire: number; earth: number; metal: number; water: number };
  }>(),
  
  // MBTIæ¨æ¼”ç»“æœ
  mbtiResult: varchar('mbti_result', { length: 4 }).notNull(),  // e.g., "INTJ"
  
  // Vertex AIç”Ÿæˆçš„æ·±åº¦æŠ¥å‘Š(Markdownæ ¼å¼,çº¦2000å­—)
  aiReportContent: text('ai_report_content'),
  
  createdAt: timestamp('created_at').notNull().defaultNow(),
}, (table) => ({
  orderIdIdx: index('order_id_idx').on(table.orderId),
}));
```

**è®¾è®¡è¦ç‚¹**:

* ä½¿ç”¨ `jsonb` å­˜å‚¨å¤æ‚å¯¹è±¡(å…«å­—æ•°æ®ã€äº”è¡Œåˆ†å€¼),ä¿æŒçµæ´»æ€§
* `aiReportContent` ä½¿ç”¨ `text` ç±»å‹,æ”¯æŒå¤§å®¹é‡æ–‡æœ¬å­˜å‚¨
* å¤–é”®å…³è” `orders.id`,æ”¯æŒçº§è”åˆ é™¤
* ç´¢å¼• `order_id` åŠ é€ŸæŸ¥è¯¢

### 2.2 ERå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   orders    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)     â”‚â”€â”€â”€â”
â”‚ email       â”‚   â”‚
â”‚ amount      â”‚   â”‚
â”‚ status      â”‚   â”‚
â”‚ creem_id    â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                  â”‚ 1:1
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   reports   â”‚   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ id (PK)     â”‚   â”‚
â”‚ order_id(FK)â”‚â—„â”€â”€â”˜
â”‚ birth_data  â”‚
â”‚ bazi_result â”‚
â”‚ mbti_result â”‚
â”‚ ai_content  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

***

## 3. APIè·¯ç”±è®¾è®¡

åŸºäºNext.js App Routerçš„API Routes,æ— éœ€ç‹¬ç«‹åç«¯æœåŠ¡ã€‚

### 3.1 æ ¸å¿ƒæ¥å£åˆ—è¡¨

| Endpoint                | Method | åŠŸèƒ½        | è®¤è¯     |
| ----------------------- | ------ | --------- | ------ |
| `/api/orders/create`    | POST   | åˆ›å»ºè®¢å•(é¢„ä¸‹å•) | âŒ æ—     |
| `/api/webhook/creem`    | POST   | æ¥æ”¶æ”¯ä»˜å›è°ƒ    | âœ… ç­¾åéªŒè¯ |
| `/api/reports/generate` | POST   | ç”ŸæˆAIæŠ¥å‘Š    | âœ… è®¢å•éªŒè¯ |
| `/api/reports/:id`      | GET    | æŸ¥è¯¢æŠ¥å‘Š      | âœ… é‚®ç®±éªŒè¯ |

### 3.2 æ¥å£è¯¦ç»†è®¾è®¡

#### 1. åˆ›å»ºè®¢å• `POST /api/orders/create`

**åŠŸèƒ½**: ç”¨æˆ·å®Œæˆå…«å­—è®¡ç®—å,å‰ç«¯è°ƒç”¨æ­¤æ¥å£é¢„åˆ›å»ºè®¢å•(çŠ¶æ€ä¸ºpending),è¿”å›è®¢å•IDä¾›Creem.ioä½¿ç”¨ã€‚

**Request Body**:

```typescript
{
  email: string;              // å¿…å¡«,ç”¨æˆ·é‚®ç®±
  birthData: {                // å¿…å¡«,å‡ºç”Ÿä¿¡æ¯
    year: number;
    month: number;
    day: number;
    hour?: number;
  };
  baziResult: {               // å¿…å¡«,å…«å­—è®¡ç®—ç»“æœ
    fourPillars: string[];
    dayMaster: string;
    elements: object;
  };
  mbtiResult: string;         // å¿…å¡«,MBTIæ¨æ¼”ç»“æœ(å¦‚"INTJ")
}
```

**Response**:

```typescript
{
  success: boolean;
  orderId: string;            // UUIDæ ¼å¼è®¢å•ID
  checkoutUrl: string;        // Creem.ioæ”¯ä»˜é“¾æ¥
}
```

**å®ç°ç¤ºä¾‹**:

```typescript
// app/api/orders/create/route.ts
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';
import { orders, reports } from '@/schema';
import { createCreemCheckout } from '@/lib/creem';

export async function POST(req: NextRequest) {
  const { email, birthData, baziResult, mbtiResult } = await req.json();
  
  // 1. åˆ›å»ºè®¢å•è®°å½•
  const [order] = await db.insert(orders).values({
    email,
    paymentStatus: 'pending',
  }).returning();
  
  // 2. åˆ›å»ºæŠ¥å‘Šè®°å½•(AIå†…å®¹ä¸ºç©º)
  await db.insert(reports).values({
    orderId: order.id,
    birthData,
    baziResult,
    mbtiResult,
  });
  
  // 3. åˆ›å»ºCreem.ioæ”¯ä»˜ä¼šè¯
  const checkoutUrl = await createCreemCheckout({
    orderId: order.id,
    email,
    amount: 12.90,
    successUrl: `${process.env.NEXT_PUBLIC_BASE_URL}/result?order_id=${order.id}`,
    cancelUrl: `${process.env.NEXT_PUBLIC_BASE_URL}/result?order_id=${order.id}&status=cancelled`,
  });
  
  return NextResponse.json({
    success: true,
    orderId: order.id,
    checkoutUrl,
  });
}
```

#### 2. æ”¯ä»˜å›è°ƒ `POST /api/webhook/creem`

**åŠŸèƒ½**: Creem.ioæ”¯ä»˜æˆåŠŸåè°ƒç”¨æ­¤æ¥å£,æ›´æ–°è®¢å•çŠ¶æ€ä¸ºpaidã€‚

**å®‰å…¨éªŒè¯**: å¿…é¡»æ ¡éªŒ `Creem-Signature` è¯·æ±‚å¤´é˜²æ­¢ä¼ªé€ ã€‚

**Request Headers**:

```
Creem-Signature: sha256=xxxxx
```

**Request Body** (Creem.ioæ ‡å‡†æ ¼å¼):

```typescript
{
  event: 'payment.succeeded';
  data: {
    payment_id: string;
    order_id: string;       // æˆ‘ä»¬åˆ›å»ºè®¢å•æ—¶ä¼ é€’çš„orderId
    amount: number;
    status: 'paid';
  };
}
```

**å®ç°ç¤ºä¾‹**:

```typescript
// app/api/webhook/creem/route.ts
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';
import { orders } from '@/schema';
import { eq } from 'drizzle-orm';
import crypto from 'crypto';

export async function POST(req: NextRequest) {
  const body = await req.text();
  const signature = req.headers.get('Creem-Signature');
  
  // 1. éªŒè¯ç­¾å
  const expectedSignature = crypto
    .createHmac('sha256', process.env.CREEM_WEBHOOK_SECRET!)
    .update(body)
    .digest('hex');
  
  if (signature !== `sha256=${expectedSignature}`) {
    return NextResponse.json({ error: 'Invalid signature' }, { status: 401 });
  }
  
  const payload = JSON.parse(body);
  
  // 2. å¹‚ç­‰æ€§æ£€æŸ¥(é˜²æ­¢é‡å¤å›è°ƒ)
  const [existingOrder] = await db
    .select()
    .from(orders)
    .where(eq(orders.id, payload.data.order_id));
  
  if (existingOrder.paymentStatus === 'paid') {
    return NextResponse.json({ success: true, message: 'Already processed' });
  }
  
  // 3. æ›´æ–°è®¢å•çŠ¶æ€
  await db.update(orders)
    .set({ 
      paymentStatus: 'paid',
      creemPaymentId: payload.data.payment_id,
      updatedAt: new Date(),
    })
    .where(eq(orders.id, payload.data.order_id));
  
  return NextResponse.json({ success: true });
}
```

#### 3. ç”ŸæˆAIæŠ¥å‘Š `POST /api/reports/generate`

**åŠŸèƒ½**: å‰ç«¯æ£€æµ‹åˆ°è®¢å•çŠ¶æ€ä¸ºpaidå,è°ƒç”¨æ­¤æ¥å£è§¦å‘Vertex AIç”ŸæˆæŠ¥å‘Šã€‚

**Request Body**:

```typescript
{
  orderId: string;            // è®¢å•ID
}
```

**Response**:

```typescript
{
  success: boolean;
  reportContent: string;      // Markdownæ ¼å¼çš„AIæŠ¥å‘Š(çº¦2000å­—)
}
```

**å®ç°ç¤ºä¾‹**:

```typescript
// app/api/reports/generate/route.ts
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';
import { orders, reports } from '@/schema';
import { eq } from 'drizzle-orm';
import { generateVertexAIReport } from '@/lib/vertex-ai';

export async function POST(req: NextRequest) {
  const { orderId } = await req.json();
  
  // 1. éªŒè¯è®¢å•å·²æ”¯ä»˜
  const [order] = await db
    .select()
    .from(orders)
    .where(eq(orders.id, orderId));
  
  if (!order || order.paymentStatus !== 'paid') {
    return NextResponse.json(
      { success: false, error: 'Order not paid' },
      { status: 403 }
    );
  }
  
  // 2. è·å–æŠ¥å‘Šæ•°æ®
  const [report] = await db
    .select()
    .from(reports)
    .where(eq(reports.orderId, orderId));
  
  // 3. æ£€æŸ¥æ˜¯å¦å·²ç”Ÿæˆ(é¿å…é‡å¤è°ƒç”¨AI)
  if (report.aiReportContent) {
    return NextResponse.json({
      success: true,
      reportContent: report.aiReportContent,
    });
  }
  
  // 4. è°ƒç”¨Vertex AIç”ŸæˆæŠ¥å‘Š
  const aiContent = await generateVertexAIReport({
    birthData: report.birthData,
    baziResult: report.baziResult,
    mbtiResult: report.mbtiResult,
  });
  
  // 5. æ›´æ–°æ•°æ®åº“
  await db.update(reports)
    .set({ aiReportContent: aiContent })
    .where(eq(reports.id, report.id));
  
  return NextResponse.json({
    success: true,
    reportContent: aiContent,
  });
}
```

#### 4. æŸ¥è¯¢æŠ¥å‘Š `GET /api/reports/:id`

**åŠŸèƒ½**: ç”¨æˆ·é€šè¿‡è®¢å•IDå’Œé‚®ç®±æŸ¥è¯¢å·²è´­ä¹°çš„æŠ¥å‘Šã€‚

**Query Parameters**:

```
?email=user@example.com
```

**Response**:

```typescript
{
  success: boolean;
  report: {
    orderId: string;
    mbtiResult: string;
    aiReportContent: string;
    createdAt: string;
  };
}
```

***

## 4. Vertex AIé›†æˆæ–¹æ¡ˆ

### 4.1 è°ƒç”¨å°è£…

```typescript
// lib/vertex-ai.ts
import { GoogleAuth } from 'google-auth-library';

const PROJECT_ID = process.env.GOOGLE_PROJECT_ID!;
const LOCATION = 'us-central1';
const MODEL_ID = 'gemini-1.5-pro';

export async function generateVertexAIReport(data: {
  birthData: any;
  baziResult: any;
  mbtiResult: string;
}) {
  const prompt = buildPrompt(data);  // è¯¦è§Promptå·¥ç¨‹æ–‡æ¡£
  
  const auth = new GoogleAuth({
    scopes: 'https://www.googleapis.com/auth/cloud-platform'
  });
  
  const client = await auth.getClient();
  const accessToken = await client.getAccessToken();
  
  const response = await fetch(
    `https://${LOCATION}-aiplatform.googleapis.com/v1/projects/${PROJECT_ID}/locations/${LOCATION}/publishers/google/models/${MODEL_ID}:predict`,
    {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${accessToken.token}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        instances: [{ content: prompt }],
        parameters: {
          temperature: 0.7,
          maxOutputTokens: 2048,
          topP: 0.9,
        },
      }),
    }
  );
  
  const result = await response.json();
  return result.predictions[0].content;
}
```

***

## 5. éƒ¨ç½²é…ç½®

### 5.1 ç¯å¢ƒå˜é‡æ¸…å•

```shellscript
# .env.local
# æ•°æ®åº“è¿æ¥
DATABASE_URL="postgresql://user:pass@xxx.neon.tech/natalcodex?sslmode=require"

# Google Vertex AI
GOOGLE_PROJECT_ID="your-gcp-project-id"
GOOGLE_APPLICATION_CREDENTIALS="/path/to/service-account-key.json"

# Creem.ioæ”¯ä»˜
NEXT_PUBLIC_CREEM_PRODUCT_ID="prod_soul_report"
CREEM_API_KEY="your-creem-api-key"
CREEM_WEBHOOK_SECRET="your-webhook-secret"

# åº”ç”¨é…ç½®
NEXT_PUBLIC_BASE_URL="https://natalcodex.com"
```

### 5.2 Verceléƒ¨ç½²æ­¥éª¤

1. **è¿æ¥Neonæ•°æ®åº“**:
   ```shellscript
   # åœ¨Neonæ§åˆ¶å°åˆ›å»ºæ•°æ®åº“,å¤åˆ¶è¿æ¥å­—ç¬¦ä¸²
   # åœ¨Vercelé¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ DATABASE_URL
   ```
2. **æ¨é€Schema**:
   ```shellscript
   npx drizzle-kit push:pg
   ```
3. **é…ç½®Webhook URL**:
   åœ¨Creem.ioæ§åˆ¶å°è®¾ç½®Webhookä¸º:
   ```
   https://your-domain.vercel.app/api/webhook/creem
   ```

***

## 6. å®‰å…¨æ€§è€ƒè™‘

### 6.1 æ”¯ä»˜å®‰å…¨

* âœ… Webhookç­¾åéªŒè¯(é˜²æ­¢ä¼ªé€ æ”¯ä»˜æˆåŠŸ)
* âœ… å¹‚ç­‰æ€§å¤„ç†(é˜²æ­¢é‡å¤å›è°ƒ)
* âœ… è®¢å•çŠ¶æ€æœºæ ¡éªŒ(pendingâ†’paid,ä¸å¯é€†)

### 6.2 æ•°æ®éšç§

* âœ… å‡ºç”Ÿä¿¡æ¯å­˜å‚¨åœ¨æ•°æ®åº“,å‰ç«¯ä¸æš´éœ²
* âœ… é‚®ç®±éªŒè¯æŸ¥è¯¢æŠ¥å‘Š,é˜²æ­¢è®¢å•IDæ³„éœ²è¢«æ»¥ç”¨
* âš ï¸ è€ƒè™‘åŠ å¯†æ•æ„Ÿå­—æ®µ(birth\_data)

### 6.3 æˆæœ¬æ§åˆ¶

* âœ… æŠ¥å‘Šç”Ÿæˆå‰éªŒè¯æ”¯ä»˜çŠ¶æ€
* âœ… ç¼“å­˜å·²ç”Ÿæˆçš„æŠ¥å‘Š,é¿å…é‡å¤è°ƒç”¨Vertex AI
* âš ï¸ è€ƒè™‘æ·»åŠ Rate Limiting(é˜²æ­¢æ¶æ„åˆ·æ¥å£)

***

## 7. MVPæ£€æŸ¥æ¸…å•

* [ ] Neonæ•°æ®åº“åˆ›å»ºå¹¶è¿æ¥æˆåŠŸ
* [ ] Drizzle Schemaå®šä¹‰å¹¶æ¨é€
* [ ] `/api/orders/create` æ¥å£æµ‹è¯•é€šè¿‡
* [ ] Creem.io Webhooké…ç½®å¹¶éªŒè¯ç­¾å
* [ ] Vertex AIè°ƒç”¨æµ‹è¯•(æ¨¡æ‹Ÿæ•°æ®)
* [ ] å®Œæ•´æ”¯ä»˜æµç¨‹ç«¯åˆ°ç«¯æµ‹è¯•
* [ ] é‚®ç®±æŸ¥è¯¢æŠ¥å‘ŠåŠŸèƒ½æµ‹è¯•
* [ ] Vercelç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å¹¶éªŒè¯

***

## 8. ä¸‹ä¸€æ­¥æ‰©å±•

**Phase 2ä¼˜åŒ–æ–¹å‘**:

1. **ç”¨æˆ·è´¦æˆ·ç³»ç»Ÿ**: é›†æˆNextAuth.js,æ”¯æŒGoogleç™»å½•
2. **é‚®ä»¶æ¨é€**: é›†æˆResend,æ”¯ä»˜æˆåŠŸåè‡ªåŠ¨å‘é€æŠ¥å‘Šåˆ°é‚®ç®±
3. **åˆ†äº«é“¾æ¥**: ç”ŸæˆçŸ­é“¾(`/share/:id`),æ”¯æŒç¤¾äº¤åª’ä½“åˆ†äº«
4. **æ•°æ®åˆ†æ**: é›†æˆVercel Analyticsæˆ–Umamiç»Ÿè®¡è½¬åŒ–ç‡

